## 의존성 주입(Dependency Injection)


### 1) 생성자 기반 주입(Constructor-based Injection) ★

**정의**: 객체를 생성하는 시점에 생성자를 통해 의존성을 주입하는 방식

**특징**

- **가장 권장되는 방식**
    - 불변성 → `final` 키워드
    - 테스트 용이성
    - 순환 참조 방지 → 앱 실행 시점에 에러를 띄워 알려줌
- `final` 키워드 사용 가능

> [!TIP]
> Lombok 라이브러리의 `@RequiredArgsConstructor`를 사용하면, 생성자 코드 작성 없이 final이 붙은 필드를 스프링이 알아서 주입함

### 2) 수정자 기반 주입(Setter-based Injection)

**정의**: 객체를 먼저 생성한 뒤, `set...()` 메서드를 통해 의존성을 주입하는 방식 

**특징**

- **선택적**이거나 **변경 가능성**이 있는 의존성에 사용
- `final` 키워드 사용 불가

### 3) 필드 기반 주입(Field Injection)

**정의**: 변수(필드) 위에 `@Autowired`를 붙여 의존성을 주입하는 방식

**특징**

- 간결함
- **외부에서 변경이 불가능**하여 테스트 코드 작성이 매우 어려움
    - private 필드라서 접근 불가

<br>

## IoC(Inversion of Control)

**정의**: 개발자 대신 외부 소스로부터(e.g. a Framework) 제어 흐름 및 객체 관리를 받는 것

**역할**

- **결합도 감소(Loose Coupling)**
- **객체 생명주기 관리**
- **코드 간결화**

**IoC와 DI 관계**

- **IoC** - 제어권을 남에게 넘기는 개념
- **DI** - IoC 원칙을 구현하기 위한 방법

> [!TIP]
> **Don’t call us, we’ll call you.**  // IoC 핵심 철학

<br>

## @Autowired

**정의**: 스프링 컨테이너에 등록되어 있는 Bean 중에서, 알맞은 Bean을 자동으로 연결해줌 

**특징**

- **타입** 확인 → (같은 타입의 Bean이 여러 개면) **이름** 확인
- 기본적으로 주입할 대상을 찾지 못하면 에러 발생
    - 없어도 되면 `@Autowired(required =false)` 설정 가능 or **Optional<T>** 사용
        - e.g. 개발 서버에서는 알림을 보낼 필요가 없고, 실제 운영 서버에서만 알림을 보내고 싶을 때