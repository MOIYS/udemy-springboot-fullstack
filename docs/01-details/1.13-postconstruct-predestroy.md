## @PostConstruct


**정의**: **해당 Bean의 의존성 주입**이 완료된 후, 실행되어야 하는 메서드에 붙이는 어노테이션

**실행 순서**

- 생성자 호출 → 의존성 주입 → `@PostConstruct`가 있는 메서드 실행

**사용 이유**

**사용처**

- DB 연결 초기화
- 초기 데이터 로딩 (e.g. 관리자 계정 자동 생성)
- 객체 필드 값 검증 (값이 제대로 들어왔는지 확인) 등

<br>

## @PreDestroy


**정의**: 컨테이너가 종료되거나, 해당 Bean이 소멸되기 직전에 실행되는 메서드에 붙이는 어노테이션

**실행 시점**

- `applicationContext.close()` 등으로 컨테이너가 종료될 때 호출

**사용 이유**

- 가지고 있던 리소스를 안전하게 릴리즈하기 위해서

**사용처**

- DB 연결 종료
- 파일 쓰기 작업 마무리
- 사용 중이던 소켓 닫기 등

> [!TIP]
> **prototype 스코프** Bean의 경우, `@PreDestory`가 호출되지 않음

<br>


## @PostConstruct & @PreDestroy 공통 특징


- Java 표준 어노테이션 (`jakarta.annotation`)
- 사용이 간편함

- 외부 라이브러리에는 못 붙임
    - **해결책**: `@Configuration` 파일 안에서 **@Bean(initMethod = "...", destroyMethod = "...")** 
    속성 사용

<br>

## Bean끼리 의존하는 경우, 생성 순서

**상황**: `Bean A`가 `Bean B`를 의존하는 경우

**처리 순서 (Bean A가 먼저 생성되는 경우)**

1. `Bean A`를 만드려니, `Bean B`가 필요한 걸 스프링이 탐지
2. `Bean B` 생성 → 주입 → `Bean B`의 `@PostConstruct` 실행
3. `BeanA` 생성 → B 주입 → `Bean A`의 `@PostConstruct` 실행