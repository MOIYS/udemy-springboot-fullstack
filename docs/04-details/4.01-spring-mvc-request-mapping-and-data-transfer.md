## RequestMethod (HTTP 메서드 매핑)

**정의**: 클라이언트가 서버에 요청을 보낼 때 어떤 동작을 원하는지, 요청 방식을 정의하기 위한 열거형 클래스

<br>

 **종류**

- `GET`
    - 서버에서 **데이터를 가져올 때** 사용
    - 데이터가 URL 뒤에 **쿼리 파라미터 형태로 노출**됨
    - **브라우저 캐싱** 가능
    - e.g. `@RequestMapping(value=”/todos”, **method=RequestMethod.GET**)`
- `POST`
    - 서버의 **데이터를 변경**하거나 **새로 등록**할 때 사용
    - 데이터가 **HTTP Body에 숨겨져서** 전송됨
    - e.g. `@RequestMapping(value=”/todos”, **method=RequestMethod.POST**)`

> [!TIP]
> `@RequestMapping` 대신 `GetMapping`, `PostMapping` 사용 권장

<br>
<br>

## 쿼리 파라미터와 데이터 흐름

- 데이터 흐름[브라우저 → 컨트롤러 → 뷰]

<br>

### 쿼리 파라미터(Query Parameter)

**정의**: URL 뒤에 `?` 문자를 시작으로 `key=value` 형태로 넘어오는 데이터

- e.g. `http://localhost:8080/welcome?name=Lee`

<br>

### @RequestParam

**정의:** Request에 있는 파라미터를 자바 변수로 binding하는 어노테이션

- e.g. `public String deleteTodo(**@RequestParam int id**)`

<br>

**옵션**

- **required**: 필수 여부
- **defaultValue**: 기본값 설정

<br>

### **ModelMap**

**정의**: Controller에서 처리한 데이터를 View로 전달하기 위한 객체

<br>

**특징**

- `Key-Value` 쌍으로 데이터 저장

**역할**

- ModelMap에 데이터를 담으면, 스프링이 자동으로 `HttpServletRequest` 객체에 데이터를 옮겨 담아서 JSP로 보냄

<br>

### 표현언어(Expression Language, `${. . .}`)

**정의**: JSP 파일 내에서 자바 코드를 쓰지 않고, `ModelMap`이나 `Scope`에 저장된 데이터에 쉽게 
접근하는 문법

<br>

**기능**

- `${name}` → ModelMap에 `name`이라는 Key로 저장된 Value를 찾아서 화면에 출력

<br>
<br>

## Request vs Session (데이터 생명주기)

- 데이터 생명주기에 따른 분류

<br>

### Request Scope

**정의**: 하나의 **HTTP 요청이 들어와서 응답이 나갈 때까지**만 유지되는 범위

<br>

**특징**

- `ModelMap`에 담은 데이터는 기본적으로 **Request Scope**

**수명**

- **새로고침**하거나 **페이지를 이동**하면 데이터는 사라짐

**사용처**

- **일회성 데이터**

<br>

### Seesion Scope

**정의**: 사용자가 브라우저를 **접속한 시점**부터 브라우저를 **끄거나 로그아웃할 때까지** 유지되는 범위

<br>

**특징**

- **서버 메모리**에 저장됨
- 여러 페이지를 이동해도 **데이터는 유지**됨

**수명**

- **설정된 타임아웃 시간**까지

**사용처**

- **로그인 정보** 등

<br>

### @SessionAttributes

**정의**: 컨트롤러 클래스 위에 선언하여, **특정 Key를 가진 `Model` 속성을 자동으로 세션에 저장**해 주는 어노테이션

<br>

**기능**

- `Model`에만 데이터를 넣으면 세션까지 승격시켜 줌

```java
// @SessionAttributes 사용 예시

@Controller
@SessionAttributes("name")
public class WelcomeController {
```

<br>
<br>

## @ResponseBody

**정의**: 자바 객체를 HTTP 응답의 본문(Body)에 직접 매핑하여 클라이언트에 전달하는 어노테이션

<br>

**특징**

- **ViewResolver 건너뛰기**
    - 기본적으로 스프링 컨트롤러가 String을 리턴하면 ‘뷰 이름(JSP 파일명)’으로 인식
    - `@ResponseBody` 어노테이션을 사용하면, `ViewResolver`가 실행되지 않고 메시지 컨버터(MessageConverter)가 동작
- **데이터 포맷**: 리턴하는 데이터 종류에 따라 적절한 포맷으로 자동 변환
    - `String` 리턴 → 문자열 전송
    - `Object` 리턴 → JSON 형식으로 변환 전송

**기능**

- 데이터 그 자체를 클라이언트에 전송

**사용처**

- 화면 이동 없이 **데이터만 주고받는 비동기 통신**
- 테스트용

<br>
<br>

## ModelMap - (put / addAttribute) 차이점

### put

- Java 표준
- **리턴값**: 이전 값(`Object`) or null
- 체이닝 불가능

<br>

### addAttribute

- Spring 전용 기능
- **리턴값**: `ModelMap` 자기 자신
- 체이닝 가능

<br>
<br>

## return “redirect: . . .” 문법

**정의**: 클라이언트에게 리디렉션하라고 명령하는 응답 방식

<br>

**특징**

- **주소 변경**: 브라우저 주소창 URL이 변경됨
- **데이터 초기화**: 새로운 요청이 발생하므로, 기존 `Request Scope`에 있던 데이터는 전부 사라짐

**기능**

- **PRG 패턴(Post-Redirect-Get)**
    - Post 요청 처리가 끝나면 Redirect 시켜서, 사용자가 새로고침을 했을 때 동일한 POST 요청을 보내는 문제 방지